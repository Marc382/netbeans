<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="netbeans" name="java/java.lsp.server">
    <description>Builds, tests, and runs the project org.netbeans.modules.java.lsp.server</description>
    <import file="../../nbbuild/templates/projectized.xml"/>
    <target name="build-lsp-server" depends="build,test-init">
        <mkdir dir="${lsp.build.dir}/bin" />
        <mkdir dir="${lsp.build.dir}/lib" />
        <copy todir="${lsp.build.dir}/lib" flatten="true" failonerror="false">
            <path refid="test.unit.run.cp" />
        </copy>
        <copy todir="${lsp.build.dir}/bin" file="script/nb-java-lsp-server" />
        <chmod file="${lsp.build.dir}/bin/nb-java-lsp-server" perm="u+x" />
        <delete file="${lsp.build.dir}/lib/nb-javac-9-api.jar" />
        <delete file="${lsp.build.dir}/lib/nb-javac-9-impl.jar" />
        <delete file="${lsp.build.dir}/lib/org-netbeans-modules-java-source-nbjavac.jar" />
    </target>
    <target name="clean" depends="projectized.clean">
        <delete dir="${lsp.build.dir}" />
    </target>
</project>
